import{c as y,a as I,r as u,j as e,M as R,e as A,f as z,i as L}from"./index-CBPv6F-N.js";import{C as P}from"./CommentBankModal-ZxPYeuEv.js";import{T as E}from"./Topbar-CFjW05tQ.js";import{A as G}from"./alert-circle-CvnIH5H0.js";import{P as j}from"./plus-DFQj3cQy.js";import{T as g}from"./trash-2-BjhHTPCW.js";import{U as M}from"./upload-GE-NSHzq.js";import"./x-DqjBKJ4Y.js";import"./search-BoT7dOho.js";import"./tag-DkMM0aZd.js";import"./pen-Bq_uJEvr.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=y("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);function Q(){const{settings:i,updateSettings:c,gradeScales:l,addGradeScale:b,updateGradeScale:d,deleteGradeScale:v,commentBank:f}=I(),[m,p]=u.useState(null),[k,x]=u.useState(!1);function C(){const t=z(),a=new Blob([t],{type:"application/json"}),s=URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download="rubric-maker-backup.json",n.click()}function S(t){var n;const a=(n=t.target.files)==null?void 0:n[0];if(!a)return;const s=new FileReader;s.onload=()=>{try{L(s.result),window.location.reload()}catch{alert("Invalid backup file.")}},s.readAsText(a),t.target.value=""}function r(t,a,s){const n=l.find(o=>o.id===t);if(!n)return;const h=n.ranges.map((o,B)=>B===a?{...o,...s}:o);d({...n,ranges:h})}function N(t){const a=l.find(s=>s.id===t);a&&d({...a,ranges:[...a.ranges,{min:0,max:0,label:"New",color:"#6b7280"}]})}function w(t,a){const s=l.find(n=>n.id===t);s&&d({...s,ranges:s.ranges.filter((n,h)=>h!==a)})}return e.jsxs(e.Fragment,{children:[e.jsx(E,{title:"Settings"}),e.jsxs("div",{className:"page-content fade-in",style:{maxWidth:900},children:[e.jsxs("div",{className:"card",style:{marginBottom:24},children:[e.jsx("h3",{style:{marginBottom:16},children:"General"}),e.jsxs("div",{className:"grid-2",style:{gap:16},children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Default Grade Scale"}),e.jsx("select",{value:i.defaultGradeScaleId,onChange:t=>c({defaultGradeScaleId:t.target.value}),children:l.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Theme"}),e.jsxs("select",{value:i.theme,onChange:t=>c({theme:t.target.value}),children:[e.jsx("option",{value:"dark",children:"Dark"}),e.jsx("option",{value:"light",children:"Light"})]})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:24,borderLeft:"4px solid var(--accent)"},children:[e.jsxs("div",{style:{display:"flex",gap:10,alignItems:"center",marginBottom:16},children:[e.jsx(q,{size:20,style:{color:"var(--accent)"}}),e.jsx("h3",{style:{margin:0},children:"Standards Integration"})]}),e.jsxs("p",{className:"text-muted text-sm",style:{marginBottom:16},children:["To link standards (CCSS, NGSS, etc.) from the ",e.jsx("strong",{children:"Common Standards Project"}),", you need a free API key."]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"CSP API Key"}),e.jsx("input",{type:"password",value:i.standardsApiKey??"",onChange:t=>c({standardsApiKey:t.target.value}),placeholder:"Paste your API key here...",autoComplete:"off"})]}),e.jsxs("div",{style:{marginTop:16,background:"var(--bg-elevated)",padding:12,borderRadius:8,fontSize:"0.85rem"},children:[e.jsxs("div",{style:{fontWeight:600,marginBottom:8,display:"flex",alignItems:"center",gap:6},children:[e.jsx(G,{size:14})," Setup Instructions"]}),e.jsxs("ol",{style:{paddingLeft:20,margin:0,lineHeight:1.6},children:[e.jsxs("li",{children:["Register at ",e.jsxs("a",{href:"https://commonstandardsproject.com/developers",target:"_blank",rel:"noopener noreferrer",style:{color:"var(--accent)"},children:["commonstandardsproject.com/developers ",e.jsx(T,{size:10})]})]}),e.jsx("li",{children:"Copy your API Key and paste it above."}),e.jsxs("li",{children:[e.jsx("strong",{children:"Important:"})," Add this app's URL (",e.jsx("code",{children:window.location.origin}),") to the ",e.jsx("strong",{children:"Allowed Origins"})," list on their dashboard, or requests will be blocked by CORS."]})]})]})]}),e.jsxs("div",{className:"card",style:{marginBottom:24,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{children:[e.jsx("h3",{style:{margin:0},children:"Comment Bank"}),e.jsxs("p",{className:"text-muted text-sm",style:{marginTop:4},children:[f.length," saved comments. Manage your reusable feedback snippets."]})]}),e.jsxs("button",{className:"btn btn-secondary",onClick:()=>x(!0),children:[e.jsx(R,{size:16})," Manage Comments"]})]}),e.jsxs("div",{className:"card",style:{marginBottom:24},children:[e.jsxs("div",{className:"card-header",children:[e.jsx("h3",{children:"Grade Scales"}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{const t=b({name:"New Scale",type:"custom",ranges:[{min:0,max:100,label:"Pass",color:"#22c55e"}]});p(t.id)},children:[e.jsx(j,{size:15})," New Scale"]})]}),l.map(t=>e.jsxs("div",{style:{marginBottom:12,background:"var(--bg-elevated)",borderRadius:10,overflow:"hidden",border:"1px solid var(--border)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10,padding:"12px 16px"},children:[e.jsx("input",{type:"text",value:t.name,onChange:a=>d({...t,name:a.target.value}),style:{flex:1,fontWeight:600,background:"transparent",border:"none",color:"var(--text)",fontSize:"0.9rem",outline:"none"}}),e.jsx("div",{style:{display:"flex",gap:4},children:t.ranges.map((a,s)=>e.jsx("div",{title:`${a.label}: ${a.min}â€“${a.max}%`,style:{width:14,height:14,borderRadius:3,background:a.color}},s))}),e.jsx("button",{className:"btn btn-ghost btn-sm",onClick:()=>p(m===t.id?null:t.id),children:m===t.id?"Collapse":"Edit"}),e.jsx("button",{className:"btn btn-ghost btn-icon btn-sm",style:{color:"var(--red)"},onClick:()=>{t.id!==i.defaultGradeScaleId?v(t.id):alert("Can't delete the default scale.")},children:e.jsx(g,{size:14})})]}),m===t.id&&e.jsxs("div",{style:{padding:"0 16px 16px"},children:[e.jsxs("table",{className:"data-table",style:{marginBottom:10},children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Label"}),e.jsx("th",{children:"Min %"}),e.jsx("th",{children:"Max %"}),e.jsx("th",{children:"Color"}),e.jsx("th",{})]})}),e.jsx("tbody",{children:t.ranges.map((a,s)=>e.jsxs("tr",{children:[e.jsx("td",{children:e.jsx("input",{type:"text",value:a.label,onChange:n=>r(t.id,s,{label:n.target.value}),style:{width:80}})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:a.min,min:0,max:100,onChange:n=>r(t.id,s,{min:Number(n.target.value)}),style:{width:60}})}),e.jsx("td",{children:e.jsx("input",{type:"number",value:a.max,min:0,max:100,onChange:n=>r(t.id,s,{max:Number(n.target.value)}),style:{width:60}})}),e.jsx("td",{children:e.jsxs("div",{style:{display:"flex",gap:6,alignItems:"center"},children:[e.jsx("input",{type:"color",value:a.color,onChange:n=>r(t.id,s,{color:n.target.value}),style:{width:36,height:32,padding:2,border:"1px solid var(--border)",borderRadius:5}}),e.jsx("input",{type:"text",value:a.color,onChange:n=>r(t.id,s,{color:n.target.value}),style:{width:80}})]})}),e.jsx("td",{children:e.jsx("button",{className:"btn btn-ghost btn-icon btn-sm",style:{color:"var(--red)"},onClick:()=>w(t.id,s),children:e.jsx(g,{size:13})})})]},s))})]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",onClick:()=>N(t.id),children:[e.jsx(j,{size:14})," Add Range"]})]})]},t.id))]}),e.jsxs("div",{className:"card",children:[e.jsx("h3",{style:{marginBottom:16},children:"Data Backup & Restore"}),e.jsxs("div",{style:{display:"flex",gap:12},children:[e.jsxs("button",{className:"btn btn-secondary",onClick:C,children:[e.jsx(A,{size:16})," Export Backup (JSON)"]}),e.jsxs("label",{className:"btn btn-secondary",style:{cursor:"pointer"},children:[e.jsx(M,{size:16})," Import Backup",e.jsx("input",{type:"file",accept:".json",onChange:S,style:{display:"none"}})]})]}),e.jsx("p",{className:"text-muted text-sm",style:{marginTop:12},children:"Export saves all rubrics, students, grades, and settings to a JSON file. Import restores everything."})]})]}),k&&e.jsx(P,{onClose:()=>x(!1)})]})}export{Q as default};
