import{c as v,u as C,a as N,r as m,j as e,B as k,U as w,n as u}from"./index-CBPv6F-N.js";import{T as z}from"./Topbar-CFjW05tQ.js";import{P as x}from"./plus-DFQj3cQy.js";import{S as R}from"./search-BoT7dOho.js";import{P as b}from"./pen-Bq_uJEvr.js";import{T as p}from"./trash-2-BjhHTPCW.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=v("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);function M(){const n=C(),{rubrics:c,students:S,studentRubrics:h,addRubric:j,deleteRubric:g}=N(),[l,y]=m.useState(""),[o,r]=m.useState(null),d=c.filter(s=>s.name.toLowerCase().includes(l.toLowerCase())||s.subject.toLowerCase().includes(l.toLowerCase()));function f(s){const i=c.find(a=>a.id===s);i&&j({...i,name:`${i.name} (Copy)`,criteria:i.criteria.map(a=>({...a,id:u(),levels:a.levels.map(t=>({...t,id:u()}))})),attachmentIds:[]})}return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:"Rubrics",actions:e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>n("/rubrics/new"),children:[e.jsx(x,{size:15})," New Rubric"]})}),e.jsxs("div",{className:"page-content fade-in",children:[e.jsxs("div",{style:{position:"relative",maxWidth:400,marginBottom:20},children:[e.jsx(R,{size:15,style:{position:"absolute",left:12,top:"50%",transform:"translateY(-50%)",color:"var(--text-dim)"}}),e.jsx("input",{type:"text",placeholder:"Search rubricsâ€¦",value:l,onChange:s=>y(s.target.value),style:{paddingLeft:36}})]}),d.length===0?e.jsxs("div",{className:"empty-state",children:[e.jsx(k,{size:40}),e.jsx("h3",{children:"No rubrics yet"}),e.jsx("p",{className:"text-muted text-sm",children:"Create your first rubric to get started."}),e.jsxs("button",{className:"btn btn-primary",onClick:()=>n("/rubrics/new"),children:[e.jsx(x,{size:16})," Create Rubric"]})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:16},children:d.map(s=>{var a;const i=[...new Set(h.filter(t=>t.rubricId===s.id).map(t=>t.studentId))];return e.jsxs("div",{className:"card",style:{cursor:"pointer",transition:"border-color var(--transition)"},onMouseEnter:t=>t.currentTarget.style.borderColor="var(--accent)",onMouseLeave:t=>t.currentTarget.style.borderColor="var(--border)",children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:12},children:[e.jsxs("div",{children:[e.jsx("h3",{children:s.name}),s.subject&&e.jsx("div",{className:"text-muted text-xs",style:{marginTop:2},children:s.subject})]}),e.jsxs("div",{style:{display:"flex",gap:4},children:[e.jsx("button",{className:"btn btn-ghost btn-icon btn-sm",title:"Duplicate",onClick:t=>{t.stopPropagation(),f(s.id)},children:e.jsx(T,{size:14})}),e.jsx("button",{className:"btn btn-ghost btn-icon btn-sm",title:"Edit",onClick:t=>{t.stopPropagation(),n(`/rubrics/${s.id}`)},children:e.jsx(b,{size:14})}),e.jsx("button",{className:"btn btn-ghost btn-icon btn-sm",title:"Delete",style:{color:"var(--red)"},onClick:t=>{t.stopPropagation(),r(s.id)},children:e.jsx(p,{size:14})})]})]}),e.jsxs("div",{style:{display:"flex",gap:8,flexWrap:"wrap",marginBottom:14},children:[e.jsxs("span",{className:"badge badge-blue",children:[s.criteria.length," criteria"]}),e.jsxs("span",{className:"badge badge-purple",children:[((a=s.criteria[0])==null?void 0:a.levels.length)??0," levels"]}),e.jsxs("span",{className:"badge badge-green",children:[i.length," students graded"]})]}),s.description&&e.jsx("p",{className:"text-muted text-sm truncate",style:{marginBottom:14},children:s.description}),e.jsxs("div",{style:{display:"flex",gap:8},children:[e.jsxs("button",{className:"btn btn-primary btn-sm",style:{flex:1},onClick:()=>n(`/rubrics/${s.id}`),children:[e.jsx(b,{size:14})," Edit Rubric"]}),e.jsxs("button",{className:"btn btn-secondary btn-sm",style:{flex:1},onClick:()=>n("/students"),children:[e.jsx(w,{size:14})," Grade Students"]})]})]},s.id)})}),o&&e.jsx("div",{className:"modal-overlay",onClick:()=>r(null),children:e.jsxs("div",{className:"modal",style:{maxWidth:420},onClick:s=>s.stopPropagation(),children:[e.jsx("div",{className:"modal-header",children:e.jsx("h3",{children:"Delete Rubric"})}),e.jsx("div",{className:"modal-body",children:e.jsx("p",{children:"This will permanently delete the rubric and all associated student scores. This cannot be undone."})}),e.jsxs("div",{className:"modal-footer",children:[e.jsx("button",{className:"btn btn-secondary",onClick:()=>r(null),children:"Cancel"}),e.jsxs("button",{className:"btn btn-danger",onClick:()=>{g(o),r(null)},children:[e.jsx(p,{size:14})," Delete"]})]})]})})]})]})}export{M as default};
